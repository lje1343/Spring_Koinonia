<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{/main/main}">
<head>

    <style>
        .flex-c-m{
            visibility: hidden;
        }
        .wrap-slick3-dots {
            width: 11.111111%;
            visibility: hidden;
        }

        .col-md-6 > img {
            width: 100%;
            height: 250px;
            object-fit: cover;
            overflow: hidden;
            border-radius: 30px;

        }

        .mtext {
            display: flex;
            flex-direction: column;
            flex-wrap: wrap;
        }
    </style>
    <title>Product Detail</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="/Vendor/bootstrap/css/bootstrap.min.css">             <!--사진사이즈-->
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="/assets/font/font-awesome-4.7.0/css/font-awesome.min.css">  <!--아이콘-->
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="/Vendor/slick/slick.css">                          <!--이미지 버튼-->
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="/Vendor/MagnificPopup/magnific-popup.css">       <!--이미지 팝업 확대-->
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="/assets/css/util.css">
    <link rel="stylesheet" href="/assets/css/header.css"/>
    <link rel="stylesheet" type="text/css" href="/assets/css/request_detail.css">
    <link rel="stylesheet" href="/assets/css/footer.css"/>
    <script src="http://code.jquery.com/jquery-3.5.1.min.js"></script>
</head>
<body class="animsition">
<!--  header start  -->
<div th:replace="~{/header/header :: headerFragment}"></div>
<!--  header end  -->


<!-- Product Detail -->

<div class=wrapper th:object="${product}">
    <section class="sec-product-detail bg0 p-t-65 p-b-60">
        <div class="container">
            <div class="row">
                <div class="col-md-6 col-lg-7 p-b-30">
                    <div class="p-l-25 p-r-30 p-lr-0-lg">
                        <div class="wrap-slick3 flex-sb flex-w">
                            <div class="wrap-slick3-dots" type="hidden"></div>
                            <div class="wrap-slick3-arrows flex-sb-m flex-w"></div>
                            <div class="slick3 gallery-lb">
                                <th:block th:each="product, i : ${productThumfileUrlList}">
                                <div class="item-slick3">
                                    <div class="wrap-pic-w pos-relative">
                                        <img th:src="${productThumfileUrlList[0+i.index]}">
                                        <a class="flex-c-m size-108 how-pos1 bor0 fs-16 cl10 bg0 hov-btn3 trans-04"
                                           href="/assets/images/product-detail-01.jpg">
                                            <i class="fa fa-expand"></i>
                                        </a>
                                    </div>
                                </div>

                                </th:block>


                            </div>
                        </div>
                    </div>
                </div>
                <form action="/product/remove"  name="registerForm" method="get">
                <div class="col-md-6 col-lg-5 p-b-30">
                    <div class="p-r-50 p-t-5 p-lr-0-lg">
                        <h4 class="mtext-105 cl2 js-name-detail p-b-14">
                            <input type="text" readonly th:field="*{title}">
                        </h4>
                        <input type="hidden" th:field="*{pno}" id="pno"/>
                        <div class="mtext">
                            <input type="text" readonly th:field="*{price}">
                        </div>
                        <div class="mtext">
                            <input type="text" readonly th:field="*{content}">
                        </div>
                        <div class="mtext">
                            <input type="text" id="name" readonly th:field="*{name}">
                        </div>



                    </div>
<!--                    <button type="submit" class="btnM btnStyleB btnStyleB_1" id="uploadBtn">-->
<!--                        삭제-->
<!--                    </button>-->
                </div>

            </form>
            </div>


            <div class="bor10 m-t-50 p-t-43 p-b-40">
                <!-- Tab01 -->
                <div class="tab01">
                    <!-- Nav tabs -->
                    <ul class="nav nav-tabs" role="tablist">
                        <li class="nav-item p-b-10">
                            <a  id="goList" class="button small" >목록 보기</a>
                        </li>

                        <li class="nav-item p-b-10" id="change01">
                            <a class="nav-link active" data-toggle="tab" role="tab" id="btn1" href="#">지역 세부사항</a>
                        </li>

                        <li class="nav-item p-b-10" id="change02">
                            <a class="nav-link" data-toggle="tab" role="tab" id="btn2" href="#">제품설명</a>
                        </li>

                        <li class="nav-item p-b-10">
                            <a class="nav-link" data-toggle="tab" href="#reviews" role="tab" id="reply">댓 글</a>
                        </li>
                    </ul>
                    <!-- Tab panes -->
                    <div class="tab-content p-t-43">
                        <!-- - -->
                        <div class="tab-pane fade show active" id="description" role="tabpanel">
                            <div class="how-pos2 p-lr-15-md">
							<span class="stext-102 cl6">
                                <td th:field="*{content}"></td>
							</span>
                            </div>
                        </div>

                        <!-- 세부사항 작성 페이지 -->
                        <div class="tab-pane fade" id="information" role="tabpanel">
                            <div class="row">
                                <div class="col-sm-10 col-md-8 col-lg-6 m-lr-auto">
                                    <ul class="p-lr-28 p-lr-15-sm">
                                        <li class="flex-w flex-t p-b-7">
											<span class="profile">
												<input type="text" readonly>
											</span>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <div class="tab-pane fade" id="reviews" role="tabpanel">
                            <div class="row">
                                <div class="col-sm-10 col-md-8 col-lg-6 m-lr-auto">
                                    <div class="p-b-30 m-lr-15-sm">


                                        <!-- Review -->
                                        <div class="area_reply ">
                                            <strong class="tit_reply">댓글
                                                <div type="button" class="btn_reply">
                                                    <span id="commentCount15_0"></span>
                                                </div>
                                            </strong>
                                            <div id="entry15Comment">
                                                <ul class="list_reply">
                                                </ul>
                                                <div class="area_paging area_paging_list">
                                                    <span class="inner_paging">

                                                    </span>
                                                </div>
                                                <form id="dataForm" style="margin: 0">
                                                    <fieldset class="fld_reply">
                                                        <legend class="screen_out">댓글쓰기</legend>
                                                        <div class="reply_write ">
                                                            <input type="hidden" name="pno" th:value="*{pno}">
                                                            <label for="content" class="lab_write"></label>
                                                            <textarea id="content" name="content" class="tf_reply"
                                                                      placeholder="여러분의 소중한 댓글을 입력해주세요"
                                                                      tabindex="1"></textarea>
                                                        </div>
                                                        <div class="writer_btn">
                                                            <button id="formBtn" class="btn_enter" tabindex="5">입력
                                                            </button>
                                                        </div>
                                                    </fieldset>
                                                </form>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
</div>


<!--  footer start  -->
<div th:replace="~{/footer/footer :: footerFragment}"></div>
<!--  footer end  -->




</body>
<script src="/assets/js/header.js"></script>
<!--===============================================================================================-->
<script src="/Vendor/jquery/jquery-3.2.1.min.js"></script> <!-- 필요 -->
<!--===============================================================================================-->
<script src="/Vendor/bootstrap/js/popper.js"></script>            <!--필요 -->
<script src="/Vendor/bootstrap/js/bootstrap.min.js"></script>
<!--===============================================================================================-->
<script src="/Vendor/slick/slick.min.js"></script>      <!--필요-->
<script src="/assets/js/slick-custom.js"></script>
<!--===============================================================================================-->
<script src="/Vendor/MagnificPopup/jquery.magnific-popup.min.js"></script>       <!-- 필요 -->
<script>
    // let pno = [[${pno}]];
    let paging = "[[${criteria.listLink}]]";

    $('.gallery-lb').each(function () { // the containers for all your galleries
        $(this).magnificPopup({
            delegate: 'a', // the selector for gallery item
            type: 'image',
            gallery: {
                enabled: true
            },
            mainClass: 'mfp-fade'
        });
    });

    $("a#goList").click(function(e){
        e.preventDefault();
        location.href = "/product/list" + paging;
    });

    console.log(sessionStorage.getItem("user"));
    console.log($("#name").val());
    console.log(sessionStorage.getItem("user")==$("#name").val());
    if(sessionStorage.getItem("user")==$("#name").val()){
        $("#change01").html(`<a class="nav-link active" href="/product/modify?pno=${pno}">수정</a>`)
        $("#change02").html(`<a class="nav-link active" href="/product/remove?pno=${pno}">삭제</a>`)
    }
</script>
</html>